{"version":3,"sources":["src/_scripts/node_modules/browser-pack/_prelude.js","src/_scripts/src/_scripts/store.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","$","document","ready","doSearch","data","searchInput","text","positionData","province","name","city","county","_sd","id","searchCount","searchList","html","searchResultTpl","tmpl","window","_storeData","_citys","level","positionPickerTpl","positionBox","appendTo","click","evt","stopPropagation","toggle","hide","delegate","target","this","idx","index","child"],"mappings":"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","file":"store.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","$(document).ready(function () {\n    var _sd = window._storeData,\n        _citys = window._citys,\n        positionData = {\n            data: _citys,\n            province: {\n                id: 110000,\n                name: '北京市'\n            },\n            city: {\n                id: 110100,\n                name: '市辖区'\n            },\n            county: {\n                id: 110101,\n                name: '东城区'\n            },\n            level: 0\n        },\n        searchInput = $('#search-input'),\n        positionPickerTpl = $('#position-picker'),\n        positionBox = $('#position-box'),\n        searchResultTpl = $('#search-result'),\n        searchCount = $('#search-count'),\n        searchList = $('#search-list');\n\n    positionPickerTpl.tmpl(positionData).appendTo('#position-box');\n\n    function doSearch() {\n        var data = [];\n\n        searchInput.text(\n            positionData.province.name\n            + (positionData.city ? ' , ' + positionData.city.name : '')\n            + (positionData.county ? ' , ' + positionData.county.name : '')\n        )\n\n        try {\n            if(positionData.county) {\n                data = _sd[positionData.province.id][positionData.city.id][positionData.county.id];\n            } else {\n                data = _sd[positionData.province.id][positionData.city.id];\n            }\n        } catch(e) {\n            data = [];\n        }\n        searchCount.text((data || []).length);\n        searchList.html(searchResultTpl.tmpl({\n            data: data || []\n        }));\n    }\n\n    doSearch();\n\n    searchInput.click(function(evt) {\n        evt.stopPropagation();\n        positionBox.toggle();\n    });\n    $('body').click(function() {\n        positionBox.hide();\n    })\n    // 切换tab，过滤子级城市数据\n    positionBox.delegate('.tab-item', 'click', function(evt) {\n        evt.stopPropagation();\n        var target = $(this),\n            idx = target.index();\n        if(idx === 0) {\n            positionData.data = _citys;\n            positionData.level = 0;\n        } else if(idx === 1 && positionData.province) {\n            positionData.data = _citys[positionData.province.id].child;\n            positionData.level = 1;\n        } else if(idx === 2 && positionData.province && positionData.city) {\n            positionData.data = _citys[positionData.province.id].child[positionData.city.id].child;\n            positionData.level = 2;\n        }\n        positionBox.html(positionPickerTpl.tmpl(positionData));\n    })\n    // 选择城市\n    positionBox.delegate('.item a', 'click', function(evt) {\n        evt.stopPropagation();\n        var target = $(this),\n            id = target.data('id'),\n            name = target.text();\n\n        if(positionData.level === 0) {\n            positionData.province = {\n                id: id,\n                name: name\n            };\n            positionData.city = null;\n            positionData.county = null;\n            positionData.data = _citys[positionData.province.id].child;\n            positionData.level = 1;\n        } else if(positionData.level === 1) {\n            positionData.city = {\n                id: id,\n                name: name\n            };\n            positionData.county = null;\n            if(_citys[positionData.province.id].child[positionData.city.id].child) {\n                positionData.data = _citys[positionData.province.id].child[positionData.city.id].child;\n                positionData.level = 2;\n            } else {\n                positionBox.hide();\n                doSearch();\n            }\n        } else if(positionData.level === 2) {\n            positionData.county = {\n                id: id,\n                name: name\n            };\n            positionBox.hide();\n            doSearch();\n        }\n        positionBox.html(positionPickerTpl.tmpl(positionData));\n    })\n\n    /*\n    searchList.delegate('.store-item', 'click', function(evt) {\n        var target = $(this),\n            gps = target.data('gps').split(','),\n            longitude, latitude;\n\n        if(gps.length == 2){\n            longitude = Number(gps[0]);\n            latitude = Number(gps[1]);\n            window.open(`//api.map.baidu.com/marker?location=${latitude},${this.detailData.longitude}&title=小米之家&content=${this.detailData.name}&output=html`)\n        }\n    })\n    */\n\n})\n"]}